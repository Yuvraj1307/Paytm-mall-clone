<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link  rel="stylesheet"  href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="../style/Index.css">
    <!-- <link rel="stylesheet" href="styles/footer.css">   -->
    <link rel="stylesheet" href="../style/producs.css">
     <script src="https://kit.fontawesome.com/6614217c3b.js" crossorigin="anonymous"></script>

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
     
      <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css"> 
    <title>Document</title>
</head>
<body>
    <!-- nav bar starts -->

    <div class="fixed-top" id="nav_body">
        <!-- nav bar starts from here -->
        <div class="sticky-top" id="nav">
            <div>
                <div id="logo"><a id="changelocation" href="index.html"><img id="nav_img" src="../optional/nav-bar/navbarimg/logo.jpeg" alt=""></a></div>
            </div>
            <!-- Logo has been attached -->
            <!-- first dropdown box starts  first menu option-->
            <div id="visable">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
                        data-bs-toggle="dropdown" aria-expanded="false">
                       Shop By Category
                    </button>
                    <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                        <!-- <li>1automation for Email Testing</li> -->
                        <div id="QA_Automation">
                            <a href="QA_Automation.html">
                                <div><img src="navbarimg/qa_automation_icon_menu.svg" alt=""></div>
                                <div>
                                    <li>
                                        <h4>QA Automation</h4>
                                    </li>
                                    <p>Automation for Email Testing</p>
                                </div>
                            </a>
                        </div>
                        <div id="HTML_Check">
                            <a href="QA_Automation.html">
                                <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                                <div>
                                    <li>
                                        <h4>HTML Check</h4>
                                    </li>
                                    <p>Find HTML/CSS issues</p>
                                </div>
                            </a>
                        </div>
                        <div id="Fake_SMTP_Server">
                            <a href="QA_Automation.html">
                                <div><img src="navbarimg/fake_smtp_server_icon_menu.svg" alt=""></div>
                                <div>
                                    <li>
                                        <h4>Fake SMTP Server</h4>
                                    </li>
                                    <p>Your own SMTP server</p>
                                </div>
                            </a>
                        </div>
                        <div id="Sandbox_API">
                            <a href="QA_Automation.html">
                                <div><img src="navbarimg/api_icon_menu.svg" alt=""></div>
                                <div>
                                    <li>
                                        <h4>Sandbox API</h4>
                                    </li>
                                    <p>Integrate with your application</p>
                                </div>
                            </a>
                        </div>
                    </ul>
                </div>
                <!-- first dropdown box ends -->

                <!-- second option in nav-bar starting -->
                <div id="second_option">
                     <input id="input" type="search" placeholder="search" >
                </div>
                <!-- second option in nav-bar ending -->

                <!-- third option in nav-bar starting -->
                <div id="third_option">
                    <a href="Pricing.html">
                        <button type="button" id="dropdownMenu2">
                            my orders
                        </button>
                    </a>
                </div>
                <!-- third option in nav-bar ending -->

                <!-- fourth option in nav-bar startyin -->
                <div class="dropdown">
                    <button  type="button" id="dropdownMenu2"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        cart items
                    </button>
                      
                         
                </div>

                <!-- fourth option in nav-bar ending -->
                <div id="user-signup">
                    <!-- login button starts -->
                    <div>
                        <button id="login"><a href="../HTMLPAGES/login.html">Log In</a></button>
                    </div>
                    <!-- login buttion ends -->

                    <!--  signup button starts-->
                    <div>
                        <button id="signup"><a href="../HTMLPAGES/signup.html">Sign Up</a></button>
                    </div>
                    <!-- signup button ends -->
                    <!-- Admin button starts-->
                    <div>
                        <button id="signup"><a href="adminlogin.html">Admin</a></button>
                    </div>
                    <!-- Admin button ends -->
                </div>
            </div>
            <!-- I -->
            <!-- N -->
            <!-- V -->
            <!-- E -->
            <!-- S -->
            <!-- invisible button starts -->
            <div id="inv_opt">
                <button id="bar" class="btn btn-primary" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i
                        class="fa-solid fa-bars"></i></button>

                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight"
                    aria-labelledby="offcanvasRightLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="offcanvasRightLabel"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <!-- added ones -->
                        <div>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Email Testing
                                </button>
                                <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                    <!-- <li>1automation for Email Testing</li> -->
                                    <div id="QA_Automation">
                                        <a href="QA_Automation.html">
                                            <div><img src="navbarimg/qa_automation_icon_menu.svg" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>QA Automation</h4>
                                                </li>
                                                <p>Automation for Email Testing</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="HTML_Check">
                                        <a href="QA_Automation.html">
                                            <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>HTML Check</h4>
                                                </li>
                                                <p>Find HTML/CSS issues</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="Fake_SMTP_Server">
                                        <a href="QA_Automation.html">
                                            <div><img src="navbarimg/fake_smtp_server_icon_menu.svg" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>Fake SMTP Server</h4>
                                                </li>
                                                <p>Your own SMTP server</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="Sandbox_API">
                                        <a href="QA_Automation.html">
                                            <div><img src="navbarimg/api_icon_menu.svg" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>Sandbox API</h4>
                                                </li>
                                                <p>Integrate with your application</p>
                                            </div>
                                        </a>
                                    </div>
                                </ul>
                            </div>
                            <!-- first dropdown box ends -->

                            <!-- second option in nav-bar starting -->
                            <div id="second_option">
                                <a href="Email_API.html">
                                    <button type="button" id="dropdownMenu2">
                                        Email API
                                    </button>
                                </a>
                            </div>
                            <!-- second option in nav-bar ending -->

                            <!-- third option in nav-bar starting -->
                            <div id="second_option">
                                <a href="Pricing.html">
                                    <button class="Pricing" type="button" id="dropdownMenu2">
                                        Pricing
                                    </button>
                                </a>
                            </div>
                            <!-- third option in nav-bar ending -->

                            <!-- fourth option in nav-bar startyin -->
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Resources
                                </button>
                                <ul id="list_items" class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                    <!-- <li>1automation for Email Testing</li> -->
                                    <div id="API">
                                        <a href="API.html">
                                            <div><img src="navbarimg/check_html_icon_menu.svg" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>API</h4>
                                                </li>
                                                <p>Intergrate with existing resources</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="Case_studies">
                                        <a href="Case_studies.html">
                                            <div><img height="40px" width="40px" src="navbarimg/file-case.png" alt="">
                                            </div>
                                            <div>
                                                <li>
                                                    <h4>Case Studies</h4>
                                                </li>
                                                <p>Success stories of our Customers</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="Blog">
                                        <a href="Case_studies.html">
                                            <div><img height="40px" width="40px" src="navbarimg/blog.png" alt=""></div>
                                            <div>
                                                <li>
                                                    <h4>Blog</h4>
                                                </li>
                                                <p>The best content about emails</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div id="Help">
                                        <a href="Help.html">
                                            <div><img height="40px" width="40px" src="navbarimg/info-center.png" alt="">
                                            </div>
                                            <div>
                                                <li>
                                                    <h4>Help</h4>
                                                </li>
                                                <p>How-to's and Knowledge base</p>
                                            </div>
                                        </a>
                                    </div>
                                </ul>
                            </div>
                            <!-- fourth option in nav-bar ending -->
                            <div class="secondappend" id="user-signup">
                                <!-- login button starts -->
                                <div>
                                    <button id="login"><a href="Log_in.html">Log In</a></button>
                                </div>
                                <!-- login buttion ends -->

                                <!--  signup button starts-->
                                <div>
                                    <button id="signup"><a href="Sign_up.html">Sign Up</a></button>
                                </div>
                                <!-- signup button ends -->
                                <!-- Admin button starts-->
                                <div>
                                    <button id="signup"><a href="adminlogin.html">Admin</a></button>
                                </div>
                                 <!-- Admin button ends -->
                            </div>
                        </div>
                        <!-- ended ones -->
                    </div>
                </div>
            </div>
            <!-- invisible button ends -->
        </div>
    </div>
    <div id="select">
        <select onchange="sortdata()"  name="" id="opt">
            <option value="high to low">high to low</option>
            <option value="low to high">low to high</option>
         </select>
      </div>
    <div id="container">
              <div>
                   <h6>Details for you</h6>
                  <h5>Miscellaneous</h5>
                  <hr>
                    <div>
                        <div class="wrapper">
                            <header>
                                <h5>Price</h5>
                            </header>
                            <div class="price-input">
                                 <div class="field">
                                      <span>Min</span>
                                      <input type="number" class="input-min" value="1000">
                                 </div>
                                 <div class="saperator">-</div>
                                 <div class="field">
                                    <span>Max</span>
                                    <input type="number" class="input-max" value="120000">
                               </div>
                            </div>
                            <div class="slider">
                                  <div class="progress"></div>
                            </div>
                            <div class="range-input">
                                <input id="imp" type="range" class="range-min" min="0" max="200000" value="1000">
                                <input id="imp" type="range" class="range-max" min="0" max="200000" value="120000">
                            </div>
                        </div>
                    </div>
                    <hr>
                     <div>
                        Brand
                     </div>
              </div>
             
             
         
                
              <div id="app">
                  
              </div>
    </div>
</body>
</html>
<script>
    const rangeInput=document.querySelectorAll("#imp")
   const priceInput=document.querySelectorAll(".price-input input")
    progress=document.querySelector(".slider .progress")
    let priceGap=1000
    //console.log(rangeInput)
    priceInput.forEach((input) => {
        input.addEventListener("input",(el)=>{
            let minVal=parseInt(priceInput[0].value),
             maxVal=parseInt(priceInput[1].value)
          
          if((maxVal - minVal >= priceGap)&& maxVal<=200000){
              if(el.target.className=="input-min"){
                rangeInput[0].value=maxVal 
                progress.style.left= (minVal/ rangeInput[0].max)*100 + "%"
              }else{
                rangeInput[1].value=maxVal 
                progress.style.right= 100-(maxVal/ rangeInput[1].max)*100 + "%" 
              }
            
          }
          
        //   else{
        //     priceInput[0].value=minVal
        //     priceInput[1].value=maxVal
        //      //console.log(parcent)
        //   }
          
             
        })
        
        });


        //onchange="sortdata()"




    rangeInput.forEach((input) => {
        input.addEventListener("input",(el)=>{
            let minVal=parseInt(rangeInput[0].value),
             maxVal=parseInt(rangeInput[1].value)
          
          if(maxVal - minVal < priceGap){
              if(el.target.className=="range-min"){
                rangeInput[0].value=maxVal - priceGap
              }else{
                rangeInput[1].value=maxVal + priceGap
              }
            
          }else{
            priceInput[0].value=minVal
            priceInput[1].value=maxVal
            progress.style.left= (minVal/ rangeInput[0].max)*100 + "%"
             progress.style.right= 100-(maxVal/ rangeInput[1].max)*100 + "%" 
             //console.log(parcent)
          }
          
             
        })
        
        });




        async function feTchdata(){
           try{
               let data=await fetch("http://localhost:8080/user/products")
               let dataArray=await data.json()
            
            renderdata(dataArray)
          
           }catch(err){
                 alert("can't get data")
                 console.log(err)
           }
        }
       
        
        let app=document.getElementById("app")

        function renderdata(dataArray){
       for(let data of dataArray){
          let col=document.createElement("div")
          let img=document.createElement("img")
               img.src=data.img
               
          let H3=document.createElement("h3")
          H3.innerText=data.price
          let btn=document.createElement("button")
          btn.innerText="add to cart"
         btn.addEventListener("click",(event)=>{
                event.preventDefault()
            addtocart(data)
             
         })
          col.append(img,H3,btn)
          app.append(col)
        }
       
    }
    feTchdata()



   async function sortdata(){
    let option=document.querySelector("#opt").value
    app.innerHTML=""
    if(option=="high to low"){

           try{
            let data=await fetch("http://localhost:8080/user/dscprod")
            let dataArray=await data.json()
            for(let data of dataArray){
          let col=document.createElement("div")
          let img=document.createElement("img")
               img.src=data.img
               
          let H3=document.createElement("h3")
          H3.innerText=data.price
          let btn=document.createElement("button")
          btn.innerText="add to cart"
         btn.addEventListener("click",(event)=>{
                event.preventDefault()
            addtocart(data)
             
         })
          col.append(img,H3,btn)
          app.append(col)
        }
            console.log(dataArray)
           }catch(err){
            alert("can't sort data")
            console.log(err)
           }


    }else{

        try{
            let data=await fetch("http://localhost:8080/user/ascprod")
            let dataArray=await data.json()

            for(let data of dataArray){
          let col=document.createElement("div")
          let img=document.createElement("img")
               img.src=data.img
               
          let H3=document.createElement("h3")
          H3.innerText=data.price
          let btn=document.createElement("button")
          btn.innerText="add to cart"
         btn.addEventListener("click",(event)=>{
                event.preventDefault()
            addtocart(data)
             
         })
          col.append(img,H3,btn)
          app.append(col)
        }
            console.log(dataArray)
           }catch(err){
            alert("can't sort data")
            console.log(err)
           }
    }
    console.log(option)
   }
    
    
      

 
     async function addtocart(data){
        try{
         let data1=await fetch("http://localhost:8080/user/cart",{
            method:"GET",
         })
        let arr=await data1.json()
         
        let arr2=arr.filter((el)=>{
            return data._id==el.id
        })
          
        if(arr2.length!=0){
           alert("product is already exist")
        }else{
            
            let img=data.img,price=data.price,id=data._id
            
            let obj={img,price,id}
            console.log(obj)
            let data2=await fetch("http://localhost:8080/user/addcart",{
            method:"POST",
            body:JSON.stringify(obj),
            headers:{"Content-type":"application/json"}
         })
         alert("product is added to cart")
        console.log(data2.json())
         }
        


        }catch(err){
            alert("can't find data")
            console.log(err)
        }

     }

     
        </script>